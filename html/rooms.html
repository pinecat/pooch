<!DOCTYPE html>

<html>
    <head>
        <title>Pooch</title>
        <link rel="icon" type="image/png" href="http://{{ .IP }}:{{ .Port }}/public/img/corgo.png"/>
        <link rel="stylesheet" type="text/css" href="http://{{ .IP }}:{{ .Port }}/public/css/rooms.css"/>

        <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.css">
        <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.js"></script>
    </head>

    <body>
        <div id="header">
            <img src="http://{{ .IP }}:{{ .Port }}/public/img/corgo.png" alt="pooch" style="width:150px;height:120px;">

            <div id="heading">
                <h1>Pooch Admin</h1>
                <h3>Rooms View</h3>
            </div>

            <div id="accop">
                Welcome {{ .UserData.Fname }} {{ .UserData.Lname }}!<br>
                <form action="/admin" method="post">
                    <button type="submit">Admin</button>
                </form>
                <form action="/logout" method="post">
                    <button type="submit">Logout</button>
                </form>
            </div>
        </div>

        <div id="content">
            {{ range $index, $data := .BdngData }}
            <h3>{{ $data.Name }}</h3>
                <div id="tableholder">
                    <table id="{{ $data.Name }}" class="display">
                        <thead>
                            <th>Room</th>
                            <th>Status</th>
                            <th>Group</th>
                            <th>Lamp Hours</th>
                            <th>Problems</th>
                            <th>Notes</th>
                            <th>Reset</th>
                        </thead>

                        <tbody>
                            {{ range $num, $info := $data.Rooms }}
                            <tr>
                                    <td>{{ $data.Abrv }}{{ $num }}</td>
                                    <td>{{ $info.Status }}</td>
                                    <td>{{ $info.Group }}</td>
                                    <td>Standard: {{ $info.Lamph.Standard }}<br>Interactive: {{ $info.Lamph.Interactive }}</td>
                                    <td>
                                        {{ range $place, $val := $info.Probcat }}
                                            {{ $val }},
                                        {{ end }}
                                    </td>
                                    <td>{{ $info.Notes }}</td>
                                    <td>
                                        <form action="/admin/resetindroom" action="post">
                                            <input type="hidden" name="hiddenreset" value="{{ $data.Name }}.{{ $num }}">
                                            <input type="submit" value="Reset"></input>
                                        </form>
                                    </td>
                            </tr>
                            {{ end }}
                        </tbody>
                    </table>
                </div>
            {{ end }}

            <form id="resetallrooms" action="/admin/resetrooms" method="post">
                <input type="submit" value="Reset All Rooms"></input>
            </form>
        </div>

        <div id="footer">
            <p class="github"><a href="https://github.com/pinecat/pooch">Github</a></p>
            <p class="contact"><a href="mailto:dudleyr1@etown.edu">dudleyr1@etown.edu</a><br>Rory Dudley<br>pinecat</p>
            <p class ="copyright">Copyright &copy; Rory Dudley (aka pinecat)</p>
        </div>

        <script>
            {{ range $index, $data := .BdngData }}
                $(document).ready(function() {
                    $('#{{ $data.Name }}').DataTable();
                });
            {{ end }}
        </script>
    </body>

</html>
