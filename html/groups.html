<!DOCTYPE html>

<html>
    <head>
        <title>Pooch</title>
        <link rel="icon" type="image/png" href="http://{{ .IP }}:{{ .Port }}/public/img/corgo.png"/>
        <link rel="stylesheet" type="text/css" href="http://{{ .IP }}:{{ .Port }}/public/css/groups.css"/>

        <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.css">
        <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.js"></script>
    </head>

    <body>
        <div id="header">
            <img src="http://{{ .IP }}:{{ .Port }}/public/img/corgo.png" alt="pooch" style="width:150px;height:120px;">

            <div id="heading">
                <h1>Pooch Admin</h1>
                <h3>Groups View</h3>
            </div>

            <div id="accop">
                Welcome {{ .UserData.Fname }} {{ .UserData.Lname }}!<br>
                <form action="/admin" method="post">
                    <button type="submit">Admin</button>
                </form>
                <form action="/logout" method="post">
                    <button type="submit">Logout</button>
                </form>
            </div>
        </div>

        <div id="content">
            <div id="tableholder">
                <h3>Users</h3>
                <form action="/admin/saveusergroups" method="post">
                    <table id="fancytable" class="display">
                        <thead>
                            <th>Username</th>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Group</th>
                        </thead>

                        <tbody>
                            {{ range $index, $data := .Users }}
                                <tr>
                                    <td>{{ $data.Username }}</td>
                                    <td>{{ $data.Fname }} {{ $data.Lname }}</td>
                                    <td>{{ $data.Type }}</td>
                                    <td><input type="text" name="{{ $data.Username }}group" placeholder="{{ $data.Group }}"></input></td>
                                </tr>
                            {{ end }}
                        </tbody>
                    </table>
                    <br><input type="submit" value="Save User Groups"></input>
                </form>
                <form id="resetform" action="/admin/resetusergroups" method="post">
                    <input type="submit" value="Reset User Groups"></input>
                </form>
            </div>

            <div id="tableholder">
                <h3>Rooms</h3>
                <form action="/admin/saveroomgroups" method="post">
                    <table id="alsofancytable" class="display">
                        <thead>
                            <th>Room</th>
                            <th>Building</th>
                            <th>Status</th>
                            <th>Group</th>
                        </thead>

                        <tbody>
                            {{ range $index, $data := .BdngData }}
                                {{ range $num, $info := $data.Rooms }}
                                    <tr>
                                        <td>{{ $data.Abrv }}{{ $num }}</td>
                                        <td>{{ $data.Name }}</td>
                                        <td>{{ $info.Status }}</td>
                                        <td><input type="text" name="{{ $data.Abrv }}{{ $num }}group" placeholder="{{ $info.Group }}"></input></td>
                                    </tr>
                                {{ end }}
                            {{ end }}
                        </tbody>
                    </table>
                    <br><input type="submit" value="Save Room Groups"></input>
                </form>
                <form id="resetform" action="/admin/resetroomgroups" method="post">
                    <input type="submit" value="Reset Room Groups"></input>
                </form>
            </div>
        </div>

        <div id="footer">
            <p class="github"><a href="https://github.com/pinecat/pooch">Github</a></p>
            <p class="contact"><a href="mailto:dudleyr1@etown.edu">dudleyr1@etown.edu</a><br>Rory Dudley<br>pinecat</p>
            <p class ="copyright">Copyright &copy; Rory Dudley (aka pinecat)</p>
        </div>

        <script>
            $(document).ready(function() {
                $('#fancytable').DataTable();
            });

            $(document).ready(function() {
                $('#alsofancytable').DataTable();
            });
        </script>
    </body>
</html>
