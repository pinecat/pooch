var ws = new WebSocket("ws://192.168.200.132:8080/admin/rooms")

ws.addEventListener("message", function(e) {console.log(e);})

ws.send("foo")



var upgrader = websocket.Upgrader{
    ReadBufferSize:  1024,
    WriteBufferSize: 1024,
}

func Upgrade(w http.ResponseWriter, r *http.Request) (*Conn, error) {
    conn, err := upgrader.upgrade(w, r, nil)
    if err != nil {
        return err
    }
    return conn
}


func TempHandler(w http.ResponseWriter, r *http.Request) {
    conn, err := upgrader.Upgrade(w, r, nil)
    if err != nil {
        fmt.Println("ERR:", err)
    }
    go func(conn *websocket.Conn) {
        c := mgopooch.DB.C("buildings")
        for {
            result := mgopooch.Building{}
            c.Find(bson.M{"name":"Nicarry"}).One(&result)
            err := conn.WriteJSON(result)
            if err != nil {
                fmt.Println("ERR:", err)
            }
            time.Sleep(time.Second * 5)
        }
    }(conn)
}
